
- project:
    name: osinfo-db
    machines:
      - libvirt-centos-7
      - libvirt-debian-9
      - libvirt-fedora-25
      - libvirt-fedora-26
      - libvirt-fedora-rawhide
      - libvirt-freebsd-10
      - libvirt-freebsd-11
    title: osinfo database
    jobs:
      - generic-build-job:
          parent_jobs: 'osinfo-db-tools-master-build'
          command: |
            export PATH=$VIRT_PREFIX/bin:$PATH
            make -j3 all
            make install OSINFO_DB_TARGET="--system"
      - generic-rpm-job:
          parent_jobs: 'osinfo-db-master-build'
          command: |
            export PATH=$VIRT_PREFIX/bin:$PATH
            rm -f *.tar.xz
            make osinfo-db.spec
            perl -i -p -e 's/BuildRequires: osinfo-db-tools.*//' osinfo-db.spec
            make rpm
